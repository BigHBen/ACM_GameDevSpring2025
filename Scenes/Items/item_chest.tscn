[gd_scene load_steps=26 format=3 uid="uid://dg62lovogyqry"]

[ext_resource type="PackedScene" uid="uid://c402qyiapbxxt" path="res://Assets/KayKit_DungeonRemastered_1.1_FREE/Assets/gltf/chest.gltf" id="1_578qm"]
[ext_resource type="Script" path="res://Scenes/Items/item_chest.gd" id="2_a45p0"]
[ext_resource type="Texture2D" uid="uid://csn0cj45jmklw" path="res://Assets/Effects/radial_Shine.png" id="3_0fox3"]
[ext_resource type="Script" path="res://UI_Work/ItemsWork/ItemsWork/BaseItem.gd" id="3_rjqkn"]
[ext_resource type="Shader" path="res://Shaders/radial_shine.gdshader" id="3_toefe"]
[ext_resource type="Texture2D" uid="uid://c1mwxc8qrs5ug" path="res://Assets/UI_Assets/knight_chest_gold.png" id="4_avg40"]
[ext_resource type="ArrayMesh" uid="uid://x5gilv7ed43f" path="res://Assets/RPG/KayKit_Adventurers_1.0_FREE/KayKit_Adventurers_1.0_FREE/Characters/gltf/knight_body_gold.res" id="4_kg5kr"]
[ext_resource type="Texture2D" uid="uid://cfshqolaykq21" path="res://Assets/UI_Assets/Speed_Potion.png" id="5_qte64"]
[ext_resource type="ArrayMesh" uid="uid://do776ir4kb3j1" path="res://Assets/RPG/KayKit_Adventurers_1.0_FREE/KayKit_Adventurers_1.0_FREE/Characters/gltf/knight_helmet_gold.res" id="6_ij65a"]
[ext_resource type="Texture2D" uid="uid://dpdg50366qto" path="res://Assets/UI_Assets/knight_helm_gold.png" id="6_iph2r"]

[sub_resource type="Resource" id="Resource_mxl0b"]
script = ExtResource("3_rjqkn")
value = 1
mesh = ExtResource("4_kg5kr")
type = 5
icon = ExtResource("4_avg40")
usable = true
removeable = true
player_removable = false
info = "Premium Gold Armor $$$"
max_stack_size = 0
special_name_type = ""
armor_type = "chest_gold"
multiplayer_sync = false

[sub_resource type="Resource" id="Resource_6a8wh"]
script = ExtResource("3_rjqkn")
value = 1
mesh = ExtResource("6_ij65a")
type = 5
icon = ExtResource("6_iph2r")
usable = true
removeable = true
player_removable = false
info = "Premium Gold Helmet $$$"
max_stack_size = 0
special_name_type = ""
armor_type = "helm_gold"
multiplayer_sync = false

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_bbc0w"]
points = PackedVector3Array(-0.605012, 0.0249606, -0.6, -0.650117, -2.38419e-07, -0.575001, -0.8, -2.38419e-07, -0.500004, -0.605012, 0.49998, -0.6, 0.604855, 0.0249606, -0.6, 0.649961, -2.38419e-07, -0.575001, -0.8, -2.38419e-07, 0.499955, -0.8, 0.6, -0.500004, -0.650117, 0.525, -0.575001, 0.604855, 0.49998, -0.6, 0.8, -2.38419e-07, -0.500004, -0.8, 0.6, 0.499955, -0.650117, -2.38419e-07, 0.574952, -0.605012, 0.0249606, 0.599951, -0.546594, 0.119988, 0.63434, 0.8, 0.6, -0.500004, 0.649961, 0.525, -0.575001, 0.8, -2.38419e-07, 0.499955, -0.605012, 0.49998, 0.599951, -0.650117, 0.525, 0.574952, 0.8, 0.6, 0.499955, 0.649961, -2.38419e-07, 0.574952, -0.500078, 0.073414, 0.63434, -0.500078, 0.119988, 0.645802, 0.604855, 0.0249606, 0.599951, 0.546437, 0.119988, 0.63434, 0.604855, 0.49998, 0.599951, 0.649961, 0.525, 0.574952, 0.499922, 0.073414, 0.63434, 0.499922, 0.119988, 0.645802)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_aoobx"]
points = PackedVector3Array(-0.605051, 0.0199502, -0.135118, -0.85, -7.52956e-05, -0.035202, -0.604885, 0.304463, -0.135118, 0.604885, 0.0199502, -0.135118, -0.0718872, -0.165002, 1.16478, -0.85, -7.52956e-05, 1.16478, -0.85, 0.280093, -0.0227479, 0.85, -7.52956e-05, -0.035202, -0.604718, 0.613442, -0.0136904, 0.604718, 0.304463, -0.135118, -0.0718872, -0.142143, 1.24191, 0.0717208, -0.165002, 1.16478, -0.85, 0.280093, 1.15232, -0.605051, 0.0199502, 1.26483, -0.546643, 0.149927, 1.29922, -0.85, 0.536173, 0.0805642, 0.85, 0.280093, -0.0227479, 0.85, -7.52956e-05, 1.16478, -0.604718, 0.8, 0.27431, 0.604552, 0.613442, -0.0136904, -0.0575764, -0.0663861, 1.26483, -0.500049, 0.103453, 1.29922, 0.0717208, -0.142143, 1.24191, -0.85, 0.536173, 1.04901, -0.604885, 0.304463, 1.26483, -0.604718, 0.613442, 1.14341, -0.500049, 0.149927, 1.31069, -0.85, 0.683436, 0.308559, 0.85, 0.536173, 0.0805642, 0.546476, 0.149927, 1.29922, 0.604885, 0.0199502, 1.26483, 0.85, 0.280093, 1.15232, -0.604718, 0.8, 0.855264, 0.604552, 0.8, 0.27431, 0.0574099, -0.0663861, 1.26483, 0.499883, 0.103453, 1.29922, -0.85, 0.683436, 0.821015, -0.500049, 0.196496, 1.29922, 0.604718, 0.304463, 1.26483, 0.604552, 0.613442, 1.14341, 0.499883, 0.149927, 1.31069, 0.85, 0.683436, 0.308559, 0.85, 0.536173, 1.04901, 0.604552, 0.8, 0.855264, 0.499883, 0.196496, 1.29922, 0.85, 0.683436, 0.821015)

[sub_resource type="Animation" id="Animation_fjpx3"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("chest/chest_lid:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_mpm1h"]
resource_name = "close"
length = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("chest/chest_lid:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.5),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(-1.309, 0, 0), Vector3(-0.872665, 0, 0), Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_sp3hl"]
resource_name = "open"
length = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("chest/chest_lid:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.5),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(-0.872665, 0, 0), Vector3(-1.309, 0, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_c5ynd"]
_data = {
"RESET": SubResource("Animation_fjpx3"),
"close": SubResource("Animation_mpm1h"),
"open": SubResource("Animation_sp3hl")
}

[sub_resource type="SphereShape3D" id="SphereShape3D_6j2x3"]
radius = 3.0

[sub_resource type="Gradient" id="Gradient_tlq15"]
offsets = PackedFloat32Array(0, 0.45082)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_8jruu"]
gradient = SubResource("Gradient_tlq15")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ecrkn"]
shader = ExtResource("3_toefe")
shader_parameter/spread = 0.5
shader_parameter/cutoff = 1.0
shader_parameter/size = 1.0
shader_parameter/speed = 1.0
shader_parameter/ray1_density = 8.0
shader_parameter/ray2_density = 30.0
shader_parameter/ray2_intensity = 0.3
shader_parameter/core_intensity = 2.0
shader_parameter/hdr = false
shader_parameter/seed = 5.0
shader_parameter/gradient = SubResource("GradientTexture1D_8jruu")

[sub_resource type="Animation" id="Animation_xv7mu"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="Animation" id="Animation_ir3yd"]
resource_name = "rotate"
length = 2.0
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.466667, 1, 1.5, 2),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [0.0, -0.523599, 0.0, 0.523599, 0.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_6hhq7"]
_data = {
"RESET": SubResource("Animation_xv7mu"),
"rotate": SubResource("Animation_ir3yd")
}

[node name="Item_Chest" groups=["Chest"] instance=ExtResource("1_578qm")]
script = ExtResource("2_a45p0")
loot = Array[ExtResource("3_rjqkn")]([SubResource("Resource_mxl0b"), SubResource("Resource_6a8wh")])

[node name="StaticBody3D" type="StaticBody3D" parent="chest" index="1"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="chest/StaticBody3D" index="0"]
shape = SubResource("ConvexPolygonShape3D_bbc0w")

[node name="CollisionShape3D2" type="CollisionShape3D" parent="chest/StaticBody3D" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, -0.564883)
shape = SubResource("ConvexPolygonShape3D_aoobx")

[node name="AnimationPlayer" type="AnimationPlayer" parent="." index="1"]
libraries = {
"": SubResource("AnimationLibrary_c5ynd")
}

[node name="Area3D" type="Area3D" parent="." index="2"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area3D" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("SphereShape3D_6j2x3")

[node name="Scan" type="Timer" parent="Area3D" index="1"]
wait_time = 0.25
autostart = true

[node name="UI" type="CanvasLayer" parent="." index="3"]

[node name="Control" type="Control" parent="UI" index="0"]
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(960, 540)

[node name="shine" type="TextureRect" parent="UI/Control" index="0"]
material = SubResource("ShaderMaterial_ecrkn")
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("3_0fox3")

[node name="item_icon" type="TextureRect" parent="UI/Control" index="1"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -225.0
offset_top = -260.0
offset_right = 225.0
offset_bottom = 260.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("5_qte64")

[node name="AnimationPlayer" type="AnimationPlayer" parent="UI/Control" index="2"]
libraries = {
"": SubResource("AnimationLibrary_6hhq7")
}

[connection signal="area_entered" from="Area3D" to="." method="_on_area_entered"]
[connection signal="area_exited" from="Area3D" to="." method="_on_area_exited"]
[connection signal="body_entered" from="Area3D" to="." method="_on_chest_entered"]
[connection signal="body_exited" from="Area3D" to="." method="_on_chest_exited"]
