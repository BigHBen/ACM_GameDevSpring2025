[gd_scene load_steps=10 format=3 uid="uid://dg62lovogyqry"]

[ext_resource type="PackedScene" uid="uid://c402qyiapbxxt" path="res://Assets/KayKit_DungeonRemastered_1.1_FREE/Assets/gltf/chest.gltf" id="1_578qm"]
[ext_resource type="Script" path="res://Scenes/Items/item_chest.gd" id="2_a45p0"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_bbc0w"]
points = PackedVector3Array(-0.605012, 0.0249606, -0.6, -0.650117, -2.38419e-07, -0.575001, -0.8, -2.38419e-07, -0.500004, -0.605012, 0.49998, -0.6, 0.604855, 0.0249606, -0.6, 0.649961, -2.38419e-07, -0.575001, -0.8, -2.38419e-07, 0.499955, -0.8, 0.6, -0.500004, -0.650117, 0.525, -0.575001, 0.604855, 0.49998, -0.6, 0.8, -2.38419e-07, -0.500004, -0.8, 0.6, 0.499955, -0.650117, -2.38419e-07, 0.574952, -0.605012, 0.0249606, 0.599951, -0.546594, 0.119988, 0.63434, 0.8, 0.6, -0.500004, 0.649961, 0.525, -0.575001, 0.8, -2.38419e-07, 0.499955, -0.605012, 0.49998, 0.599951, -0.650117, 0.525, 0.574952, 0.8, 0.6, 0.499955, 0.649961, -2.38419e-07, 0.574952, -0.500078, 0.073414, 0.63434, -0.500078, 0.119988, 0.645802, 0.604855, 0.0249606, 0.599951, 0.546437, 0.119988, 0.63434, 0.604855, 0.49998, 0.599951, 0.649961, 0.525, 0.574952, 0.499922, 0.073414, 0.63434, 0.499922, 0.119988, 0.645802)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_aoobx"]
points = PackedVector3Array(-0.605051, 0.0199502, -0.135118, -0.85, -7.52956e-05, -0.035202, -0.604885, 0.304463, -0.135118, 0.604885, 0.0199502, -0.135118, -0.0718872, -0.165002, 1.16478, -0.85, -7.52956e-05, 1.16478, -0.85, 0.280093, -0.0227479, 0.85, -7.52956e-05, -0.035202, -0.604718, 0.613442, -0.0136904, 0.604718, 0.304463, -0.135118, -0.0718872, -0.142143, 1.24191, 0.0717208, -0.165002, 1.16478, -0.85, 0.280093, 1.15232, -0.605051, 0.0199502, 1.26483, -0.546643, 0.149927, 1.29922, -0.85, 0.536173, 0.0805642, 0.85, 0.280093, -0.0227479, 0.85, -7.52956e-05, 1.16478, -0.604718, 0.8, 0.27431, 0.604552, 0.613442, -0.0136904, -0.0575764, -0.0663861, 1.26483, -0.500049, 0.103453, 1.29922, 0.0717208, -0.142143, 1.24191, -0.85, 0.536173, 1.04901, -0.604885, 0.304463, 1.26483, -0.604718, 0.613442, 1.14341, -0.500049, 0.149927, 1.31069, -0.85, 0.683436, 0.308559, 0.85, 0.536173, 0.0805642, 0.546476, 0.149927, 1.29922, 0.604885, 0.0199502, 1.26483, 0.85, 0.280093, 1.15232, -0.604718, 0.8, 0.855264, 0.604552, 0.8, 0.27431, 0.0574099, -0.0663861, 1.26483, 0.499883, 0.103453, 1.29922, -0.85, 0.683436, 0.821015, -0.500049, 0.196496, 1.29922, 0.604718, 0.304463, 1.26483, 0.604552, 0.613442, 1.14341, 0.499883, 0.149927, 1.31069, 0.85, 0.683436, 0.308559, 0.85, 0.536173, 1.04901, 0.604552, 0.8, 0.855264, 0.499883, 0.196496, 1.29922, 0.85, 0.683436, 0.821015)

[sub_resource type="Animation" id="Animation_fjpx3"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("chest/chest_lid:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_mpm1h"]
resource_name = "close"
length = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("chest/chest_lid:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.5),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(-1.309, 0, 0), Vector3(-0.872665, 0, 0), Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_sp3hl"]
resource_name = "open"
length = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("chest/chest_lid:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.5),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(-0.872665, 0, 0), Vector3(-1.309, 0, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_c5ynd"]
_data = {
"RESET": SubResource("Animation_fjpx3"),
"close": SubResource("Animation_mpm1h"),
"open": SubResource("Animation_sp3hl")
}

[sub_resource type="SphereShape3D" id="SphereShape3D_6j2x3"]
radius = 3.0

[node name="Item_Chest" groups=["Chest"] instance=ExtResource("1_578qm")]
script = ExtResource("2_a45p0")

[node name="StaticBody3D" type="StaticBody3D" parent="chest" index="1"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="chest/StaticBody3D" index="0"]
shape = SubResource("ConvexPolygonShape3D_bbc0w")

[node name="CollisionShape3D2" type="CollisionShape3D" parent="chest/StaticBody3D" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, -0.564883)
shape = SubResource("ConvexPolygonShape3D_aoobx")

[node name="AnimationPlayer" type="AnimationPlayer" parent="." index="1"]
libraries = {
"": SubResource("AnimationLibrary_c5ynd")
}

[node name="Area3D" type="Area3D" parent="." index="2"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area3D" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("SphereShape3D_6j2x3")

[node name="Scan" type="Timer" parent="Area3D" index="1"]
wait_time = 0.25
autostart = true

[connection signal="body_entered" from="Area3D" to="." method="_on_chest_entered"]
[connection signal="body_exited" from="Area3D" to="." method="_on_chest_exited"]
